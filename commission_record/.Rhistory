is.integer(t2)
is.integer(t2[1])
is.integer(t2[2])
t2[1]
as.integer(t2[1])
?as.integer
integer(t2)
integer(t2[1])
is.numeric(t2)
is.numeric(t2[2])
is.numeric(t2[1])
as.numeric(t2)
as.numeric(t2[2])
as.numeric(t2[1])
as.numeric(t2[1]) != na
is.na(as.numeric(t2[1]))
is.na(as.numeric(t2[2]))
t2
t2[1]
iconv(t2[1],"ascii",native
)
iconv(t2[1],"ascii","native")
iconv(t2[1],"ascii","big5")
iconv(t2[1],"ascii","utf-8")
t2[2]
charToRaw(t2[2])
as.char(charToRaw(t2[2]))
as.character(charToRaw(t2[2]))
t2[2]<-as.character(charToRaw(t2[2]))
t2
t<-link[2,1]
t2<-strsplit(gsub("> <","><",gsub("  "," ",gsub(">","> ",gsub("<"," <",t))))," ")
as.character(charToRaw(t2[2]))
t2
charToRaw(t2[2])
t2[2]
t2<-t2[[1]][2:length(t2[[1]])]
t2
as.character(charToRaw(t2[2]))
class(as.character(charToRaw(t2[2])))
t2<-as.character(charToRaw(t2[2]))
t<-link[2,1]
t2<-strsplit(gsub("> <","><",gsub("  "," ",gsub(">","> ",gsub("<"," <",t))))," ")
t2<-t2[[1]][2:length(t2[[1]])]
t3<-as.character(charToRaw(t2[2]))
t3
t3[1]
??vectorpaste
??pastevector
??vector
??vector
append(1:5, 0:1, after = 3)
sum(1, 2, 3, 4, 5)
paste(t3)
?paste
toString(t3)
paste(t3, collaps="")
paste(t3, collaps=" ")
paste(t3, collaps="")
paste(1:12)
paste0(1:12)
paste(t3,sep="", collaps="")
paste(t3,sep="")
paste(t3,sep=" ")
paste(t3,collaps=" ")
paste(t3,collaps="")
a <- c("aa", "bb", "cc")
z
a
paste(a,collapse=" ")
t3
class(t3)
paste(a)
paste(t3,collapse=" ")
paste(t3,collapse="><")
paste(c("<",t3,">",collapse="><")
paste(c("<",t3,">"),collapse="><")
paste(c("<",paste(t3,collapse="><"),">")
)
paste(c("<",paste(t3,collapse="><"),">"))
paste(c("<",paste(t3,collapse="><"),">"),collapse="")
t2[2]
t2[2]<-paste(c("<",paste(t3,collapse="><"),">"),collapse="")
t2
?unsplit
unsplit(t2)
unsplit(t2,1:3)
unsplit(t2,)
unsplit(t2,"")
unsplit(t2," ")
?strsplit
unlist
?unlist
?unlist(t2)
unlist(t2)
class(t2)
t2[1]
t2[2]
as.list(t2)
unlist(as.list(t2))
c(t2)
## append to a list:
ll <- list(A = 1, c = "C")
## do *not* use
c(ll, d = 1:3) # which is == c(ll, as.list(c(d = 1:3))
## but rather
c(ll, d = list(1:3))  # c() combining two lists
as.vector(t2)
paste(t2)
paste(t2,collapse="")
get_url<-getURL("http://www.tupc.gov.taipei/lp.asp?CtNode=6308&CtUnit=4388&BaseDSD=7&mp=120021&nowPage=1&pagesize=200", encoding="UTF-8")
get_url_parse<-htmlParse(get_url, encoding="UTF-8")
link <- xpathSApply(get_url_parse,"//div[@class='list']/ul/li/a",xmlAttrs)
t<-link[2,1]
t2<-strsplit(gsub("> <","><",gsub("  "," ",gsub(">","> ",gsub("<"," <",t))))," ")
t2<-t2[[1]][2:length(t2[[1]])]
t3<-as.character(charToRaw(t2[2]))
t2[2]<-paste(c("<",paste(t3,collapse="><"),">"),collapse="")
t4<-paste(t2,collapse="")
t4
strsplit(gsub("> <","><",gsub("  "," ",gsub(">","> ",gsub("<"," <",t))))," ")
gsub("> <","><",gsub("  "," ",gsub(">","> ",gsub("<"," <",t))))
gsub(">","> ",gsub("<"," <",t))
gsub(">  <","><",gsub(">","> ",gsub("<"," <",t)))
strsplit(gsub(">  <","><",gsub(">","> ",gsub("<"," <",t)))," ")
t<-link[2,1]
t2<-strsplit(gsub(">  <","><",gsub(">","> ",gsub("<"," <",t)))," ")
t2<-t2[[1]][2:length(t2[[1]])]
t3<-as.character(charToRaw(t2[2]))
t2[2]<-paste(c("<",paste(t3,collapse="><"),">"),collapse="")
t4<-paste(t2,collapse="")
t4
gsub(">"," ",t4)
gsub("<"," ",gsub(">"," ",t4))
gsub("  "," ",gsub("<"," ",gsub(">"," ",t4)))
as.raw(gsub("  "," ",gsub("<"," ",gsub(">"," ",t4))))
?as.raw
is.raw(gsub("  "," ",gsub("<"," ",gsub(">"," ",t4))))
t2
t3
t2
x
x<-"test"
charToRaw(x)
charToRaw(x)[1]
charToRaw(x)[2]
t3
as.vector(t3)
class(charToRaw(x)[1])
y<-"65"
y
as.raw(y)
y
is.raw(y)
x <- "A test string"
(y <- charToRaw(x))
is.vector(y) # TRUE
rawToChar(y)
is.raw(x)
is.raw(y)
??tau
x
y
y[4]
as.character(y[4])
as.raw(as.character(y[4]))
rawToChar(t[4])
rawToChar(y[4])
rawToChar(as.character(y[4]))
charToRaw(as.character(y[4]))
?raw
raw
raw()
raw("E")
raw("e")
raw(y)
raw(x)
raw
raw(c(41))
raw(c(0))
raw(c(1,2,3))
raw(c(3))
raw(c(1))
raw(c(1))<-y[4]
y[4]
raw(c(1))<-42
??raw
raw(3)
raw(3)<-c(42,64,12)
raw(3)
?raw
isASCII(t4)
isASCII <-  function(txt) all(charToRaw(txt) <= as.raw(127))
isASCII(x)  # true
isASCII("\x9c25.63") # false (in Latin-1, this is an amount in UK pounds)
x
t4
isASCII(t4)
as.raw(40)
raw(1)<-as.raw(40)
xx <- raw(2)
xx[1] <- as.raw(40)     # NB, not just 40.
xx[2] <- charToRaw("A")
xx
x <- "A test string"
(y <- charToRaw(x))
is.vector(y) # TRUE
y[1]
class(y[1])
rawToChar(y)
rawToChar(y, multiple = TRUE)
(xx <- c(y,  charToRaw("&"), charToRaw("more")))
rawToChar(xx)
rawShift(y, 1)
rawShift(y, -2)
rawToBits(y)
z <- as.raw(5)
z ; showBits(z)
showBits <- function(r) stats::symnum(as.logical(rawToBits(r)))
z <- as.raw(5)
z ; showBits(z)
link[2,1]
iconv("test",,"utf-8")
iconv("test", ,"utf-8")
x <- "fa\xE7ile"
Encoding(x) <- "latin1"
x
charToRaw(xx <- iconv(x, "latin1", "UTF-8"))
xx
a<-"\xe8\x87"
a
iconv(a,"latin1","utf-8")
iconv(a,"utf-8","big5")
iconv(a,"latin1","utf-8","big5")
iconv(iconv(a,"latin1","utf-8"),"utf-8","big5")
a
Encoding(a)<-"latin1"
a
a<-"\xe8\x87"
Encoding(a)<-"utf-8"
a
iconv(a,"utf-8","big5")
t4
a
Encoding(a)<-"latin1"
a
Encoding(t4)
Encoding(t4)<-"latin1"
t4
Encoding(t4)<-"utf-8"
t4
t4<-paste(t2,collapse="")
Encoding(t4)<-"utf-8"
t4
charToRaw(xx <- iconv(x, "latin1", "UTF-8"))
xx
t4
Encoding(t4)<-"latin1"
iconv(t4,"latin1","utf-8")
a<-"臺北市都市計畫委員會第670次委員會議紀錄"
a
Encoding)a
Encoding(a)
iconv(a,"utf-8","latin1")
a
a
Encoding(a)<-"latin1"
a
iconv(a,"latin1","utf-8")
iconv(a,"latin1","big5")
a
b<-iconv(a,"latin1","utf-8")
b
iconv(b,"utf-8","big5")
t4
iconv(t4,"latin1","big5")
get_url<-getURL("http://www.tupc.gov.taipei/lp.asp?CtNode=6308&CtUnit=4388&BaseDSD=7&mp=120021&nowPage=1&pagesize=200", encoding="latin1")
get_url_parse<-htmlParse(get_url, encoding="latin1")
link <- xpathSApply(get_url_parse,"//div[@class='list']/ul/li/a",xmlAttrs)
link[2,]
link[2,1]
link[1,1]
link[2,1]
Encoding(link[2,1])
t<-link[2,1]
t5
Encoding(t)
Encoding(t)<-"latin1"
t
iconv(t,"latin1","utf-8")
b
a
t
t[1]
t[[1]]
iconv(t[[1]],"latin1","utf-8")
?fix
fix(a)
??tmcb
??tmcn
sessionInfo()
??decode
(y <- URLencode("a url with spaces and / and @"))
URLdecode(y)
(y <- URLencode("a url with spaces and / and @", reserved = TRUE))
URLdecode(y)
get_url<-getURL("http://www.tupc.gov.taipei/lp.asp?CtNode=6308&CtUnit=4388&BaseDSD=7&mp=120021&nowPage=1&pagesize=200", encoding="utf-8")
get_url_parse<-htmlParse(get_url, encoding="big5")
link <- xpathSApply(get_url_parse,"//div[@class='list']/ul/li/a",xmlAttrs)
link[2,1]
install.packages("stringi")
?stri
??stri
install.packages("rawFasta")
??rawFasta
??stri
?htmlParse
link[2,]
?decode
??decode
base64decode("<e8><87><ba>")
library(utils)
URLdecode("<e8><87><ba>")
URLdecode("\xe8\x87\xba")
URLdecode(\xe8\x87\xba)
URLdecode("\xe8\x87\xba")
iconv(URLdecode("\xe8\x87\xba"),"utf-8","big5"
)
link[2,1]
link[2,1][1]
link[2,1][[1]]
t
t<-link[2,1][[1]]
t
gsub("<","\x",t)
gsub("<","\\x",t)
gsub("<","\\\x",t)
gsub("<","\x",t)
gsub(">","\x",t)
gsub("<",".\x",t)
??escape
htmlEscape(t, attribute = FALSE)
library(htmltools)
htmlEscape(t, attribute = FALSE)
class(htmlEscape(t, attribute = FALSE))
htmlEscape(t, attribute = TRUE)
htmlEscape(t)
"\x"
"5"
""\x""
?quote
?Quotes
\\x
"\\x"
"\x"
"\\x"
"\xnn"
\xnn
gsub("<","\\x",t)
gsub("<","\\\x",t)
"\\"
"\"
""
"\""
\''
\'
"\'"
''
'
"\\"
gsub("<","\\x",t)
'\','
'\\x'
\xe8\x87\xba
"x"
"\"
"\"
\
""
""
\\
a
yre
"\x"
b
t
t4
t5
t3
t2
t1
x1="\\str"
x2="\\\str"
x2="\\\\str"
x1
x2
gsub("<","\\\x",t)
gsub("<","\x",t)
gsub("<","\\\x",t)
gsub("<","\\x",t)
gsub(">","",gsub("<","\\x",t))
t5gsub(">","",gsub("<","\\x",t))
t5<-gsub(">","",gsub("<","\\x",t))
Encoding(t5)
Encoding(t5)<-"utf-8"
t5
iconv(t5,"utf-8","big5")
gsub("><","\x",t)
gsub("><","\\x",t)
gsub("><","\\\\x",t)
gsub("><","\\\x",t)
gsub("><","\\x",t)
gsub("><"," \\x",t)
gsub("><","\\\\x",t)
gsub("<","\\\\x",t)
gsub(">","",gsub("<","\\\\x",t))
t5<-gsub(">","",gsub("<","\\\\x",t))
t5
iconv(t5,"utf-8","big5")
Encoding(t5)<-"utf-8"
iconv(t5,"utf-8","big5")
gsub("\","",t5)
gsub("\\","",t5)
gsub("\\\\","",t5)
gsub("\\","",t5)
x<-"%E8%87%BA%E5%8C%97"
Encoding(x)<-"utf-8"
x
iconv(x,"utf-8","big5")
x<-"臺北"
iconv(x,"big5","utf-8")
Encoding(x)<-"utf-8"
x
iconv(x,"utf-8","big5")
"\xe5\x85\xb3\xe9\x94\xae\xe8\xaf\x8d\xe8\xaf\xad happy \xe5\x93\x88\xe5\x93\x88"
x<-"\xe5\x85\xb3\xe9\x94\xae\xe8\xaf\x8d\xe8\xaf\xad happy \xe5\x93\x88\xe5\x93\x88"
iconv(x,"utf-8","big5")
Encoding(x)<-"utf-8"
iconv(x,"utf-8","big5")
?URLdecode
URLdecode(z <- "ab%20cd")
URLdecode("\xe5\x85\xb3")
ioconv(URLdecode("\xe5\x85\xb3"),"utf-8","big5")
iconv(URLdecode("\xe5\x85\xb3"),"utf-8","big5")
t5
t6
txt<-URLdecode("\xe5\x85\xb3")
Encoding(txt)<-"utf-8"
txt
iconv(txt,"utf-8","big5")
URLdecode(t5)
URLencode("臺北")
txt<-URLencode("臺北")
URLdecode(txt)
link[2,1]
t
gsub("<","%",t)
gsub(">","",gsub("<","%",t))
t2<-gsub(">","",gsub("<","%",t))
t2
URLdecode(t2)
iconv(URLdecode(t2),"utf-8","big5")
t<-link[2,1][[1]]
t2<-gsub(">","",gsub("<","%",t))
t3<-iconv(URLdecode(t2),"utf-8","big5")
t3
library(bitops)
library(RCurl)
library(XML)
Sys.setlocale(category='LC_ALL', locale='C')
get_url<-getURL("http://www.tupc.gov.taipei/lp.asp?CtNode=6308&CtUnit=4388&BaseDSD=7&mp=120021&nowPage=1&pagesize=200", encoding="utf-8")
get_url_parse<-htmlParse(get_url, encoding="utf-8")
link <- xpathSApply(get_url_parse,"//div[@class='list']/ul/li/a",xmlAttrs)
t<-link[2,1][[1]]
t2<-gsub(">","",gsub("<","%",t))
t3<-iconv(URLdecode(t2),"utf-8","big5")
t3
link
link<-data.frame(weblink=link[1,],filename=link[2,],stringsAsFactors = FALSE)
link
View(link)
setwd("E:/SkyDrive/GitHub/urbancodeg0vtw/commission_record")
source("tpup.R")
debug(tpup)
tuup()
tpup()
source("tpup.R")
debug(tpup)
tpup()
link[1,]
library(bitops)
library(RCurl)
library(XML)
Sys.setlocale(category='LC_ALL', locale='C')
get_url<-getURL("http://www.tupc.gov.taipei/lp.asp?CtNode=6308&CtUnit=4388&BaseDSD=7&mp=120021&nowPage=1&pagesize=200", encoding="utf-8")
get_url_parse<-htmlParse(get_url, encoding="utf-8")
link <- xpathSApply(get_url_parse,"//div[@class='list']/ul/li/a",xmlAttrs)
link<-data.frame(weblink=link[1,],filename=link[2,],stringsAsFactors = FALSE)
for(i in 1:nrow(link)){
txt<-link[i,2]
txt<-gsub(">","",gsub("<","%",txt))
txt<-iconv(URLdecode(txt),"utf-8","big5")
link[i,2]<-txt
}
View(link)
link[1,]
source("tpup.R")
tpup()
source("moiup.R")
moiup()
source("tpup.R")
tpup()
